<!------------------------------------------------
|
|	Question
|	This should kinda work like /company/challenges.html
|
-------------------------------------------------->
<template name="course_questions">
	{{#mooqita_wide_spacing}}
		<div class="item padding-top">
			<div class="padding-next">
				<div class="btn-toolbar" role="toolbar">
					<div class="btn-group">
						<button class="btn btn-theme" id="add_question" type="button">
							Create Question
						</button>
					</div>
				</div>
			</div>

			<div class="row" style="margin-bottom: 25px">
				<div class="col-sm-6">
					<div class="input-group">
						<input placeholder="Search for questions" id="query"
								 class="form-control edit-field"/>
						<span class="input-group-btn">

							<button class="btn btn-theme" type="button" id="search">
								<span class="glyphicon glyphicon-search"></span>
							</button>
						</span>
					</div>
				</div>
				<div class="col-sm-6">
				<div id="quiz"></div>
				<button id="submit">Get Results</button>
				<div id="results"></div>
				<div class="col-sm-6">	
				</div>
					{{>paging subscription="my_questions" page=0 count=10 parameter=parameter}}
				</div>
			</div>

			{{#unless Template.subscriptionsReady}}
				{{>wait}}
			{{else}}
				{{#each questions}}
						{{>question_preview}}
					{{else}}
						<h2><em>No questions yet.</em></h2>
					{{/each}}
			{{/unless}}
		</div>
	{{/mooqita_wide_spacing}}
</template>
<!------------------------------------------------
|
|	questions list
|
-------------------------------------------------->
<template name="question_preview">
	<h2>
		<a href="{{build_url "organization_challenge" (object challenge_id=_id)}}">
			{{question}}
		</a>
	</h2>
	{{course}}
	{{>more content=content}}
</template>
<!------------------------------------------------
|
|	Question Editor
|
-------------------------------------------------->
<template name="organization_question">
	{{#mooqita_wide_spacing}}
		{{#unless Template.subscriptionsReady}}
			{{>wait}}
		{{else}}
			{{#with question}}
				{{#unless g_is_public "Questions"}}
					<div class="padding-top">
						<div class="alert alert-warning">
							<h2>Todo List: Question</h2>

							Before you publish a question you must have the following:
							<ul>
								{{#unless question}}
									<li>Give your question a title (required)</li>
								{{/unless}}

								{{#unless content}}
									<li>The answer to the question MUST be first, the order of options will be randomized when published</li>
								{{/unless}}

								{{#unless num_reviews}}
									<li>Define how many reviews learners have to write to finish the task</li>
								{{/unless}}

								{{#unless material}}
									<li>Add additional materials (optional)</li>
								{{/unless}}

								{{#unless g_is_saved "Challenges"}}
									<li>Save it!</li>
								{{/unless}}

								<li>Publish your solution you find the button below.</li>
							</ul>
						</div>
					</div>
				{{/unless}}

				<div class="padding-next">
					<h1 class="editable">
						{{#if g_is_public "Questions"}}
							<em><b>LIVE</b></em>
						{{/if}}

						{{>basic_input method="set_field" collection_name="Questions"
						item_id=_id field="question" placeholder="Enter your question"}}
					</h1>
					<h2>Enter answer options starting with the correct answer. The answers will be randomized when published</h2>
					{{>basic_input method="set_field" collection_name="Questions"
						item_id=profile._id field="organization_name"
						placeholder="Correct Answer"}}
					<div class="btn-group">
						<button class="btn btn-theme" id="add_answer" type="button">
							Add answer
						</button>
					</div>

					<h2 class="header">Select one of the following</h2>
					{{>select_input method="set_field" collection_name="Challenges"
							item_id=_id field="course"
							options=course_options}}
							
					<div class="form-group" style="display: block; overflow: hidden;">
						<h2>Content:</h2>
						{{>markdown_input method="set_field" collection_name="Challenges"
								item_id=_id field="content" placeholder="Content"}}

						{{#if g_is_public "Challenges"}}
							<h2>Shareable link:</h2>

							<div class="input-group">
								<div class="input-group-btn" id="icon_download" title="select the entire url">
									<button type="button" class="btn btn-theme">
										<span class="glyphicon glyphicon-download"></span>
									</button>
								</div>

								<div class="form-control"
										 style="background: #f5f5f5; overflow: hidden"
										 id="challenge_url">
									<div style="white-space:nowrap">
										{{share_url}}
									</div>
								</div>
							</div>
						{{else}}
							<h2>Number of reviews required</h2>
							{{>basic_input  method="set_field" collection_name="Challenges"
									type="number" item_id=_id field="num_reviews"
									placeholder="Number of reviews required."}}
						{{/if}}

						<h2>Upload Additional material:</h2>
						<h2>
							{{>upload method="upload_file" collection_name="Challenges"
								item_id=_id field="material"}}
						</h2>

						{{#if material}}
							<h2>Download Additional material:</h2>
							<h2>
								{{>download collection_name="Challenges" item_id=_id field="material"}}
							</h2>
						{{/if}}
					</div>

					{{#if isInRole 'admin'}}
						<div class="form-group">
							<h2>Message Learners</h2>

							<input placeholder="Subject"
										 class="form-control edit-field"
										 type="text" id="subject"/>

							<textarea  class="form-control edit-field" placeholder="Your message"
												 id="message" rows="8"></textarea>

							<div class="text-right" style="padding-top: 15px;">
								<div class="btn btn-theme" id="send" {{send_disabled}}>
									{{#if send_disabled}}
										Sending mail
										<span class="glyphicon glyphicon-refresh spin"></span>
									{{else}}
										Send Message
									{{/if}}
								</div>
							</div>
						</div>
					{{/if}}
				</div>

				{{#unless g_is_public "Questions"}}
					<div class="row">
						<div class="form-group col-sm-6">
							<span class="btn-group btn-group-justified">
								<div class="btn btn-theme" id="save">Save</div>
							</span>
						</div>

						<div class="form-group col-sm-6">
							<span class="btn-group btn-group-justified">
								<div class="btn btn-theme" {{publish_disabled}}
										 id="publish">Make public</div>
							</span>
						</div>
					</div>
				{{/unless}}

				{{#if g_is_public "Questions"}}
					{{>challenge_solutions .}}
				{{/if}}
			{{/with}}
		{{/unless}}
	{{/mooqita_wide_spacing}}
</template>





	<!--div class="col-md-12">
		<h2>Credits <span class="badge background-contrast">1</span></h2>
		<p>
			Credits is the currency in Mooqita.
			Every time you write a review you get credits.
			You can spend these credits requesting reviews.
			Every review that you write will also influence
			your resume and your score card.
		</p>


	</div-->
